{% import "_includes/forms" as forms %}


{#% includeCssResource 'social/css/disableSave.css' %#}

{% set oauth = craft.plugins.getPlugin('oauth') %}

{% if oauth %}

	{% include 'oauth/updates/_check' with {plugins:['oauth', 'social']} %}


	<h2 class="first">Enabled Providers</h2>

	<ul>
		{% set oneFound = false %}

        {% for provider in craft.oauth.getProviders() %}

            	{% set oneFound = true %}
				<li><span class="status on"></span> {{provider.name}}</li>

        {% endfor %}

        {% if not oneFound %}
			<li><em>No provider configured</em></li>
        {% endif %}
	</ul>

	<p>Go to <a href="{{url('oauth')}}">OAuth</a> in order to configure OAuth providers.</p>

	<hr>

	<h2>Social Login Settings</h2>

    {{ forms.checkboxField({
        label: 'Register user even if no email is available ?'|t,
        instructions: "Allows you to connect the user right away and ask his email address afterward. If disabled, services not providing email addresses like Twitter will not work."|t,
        first:true,
        required: true,
        name: 'allowFakeEmail',
        value: 1,
        checked: settings ? settings.allowFakeEmail : true,
        errors: settings ? settings.errors('allowFakeEmail') : null
    }) }}

{% else %}

	{% include 'social/_oauth/index' %}

{% endif %}

