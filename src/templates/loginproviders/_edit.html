{% extends "_layouts/cp" %}
{% import "_includes/forms" as forms %}

{% set title = loginProvider.name %}

{% set crumbs = [
    { label: "Settings"|t('social'), url: url('settings') },
    { label: "Social"|t('social'), url: url('settings/social') },
    { label: "Login Providers"|t('social'), url: url('settings/social/loginproviders') },
] %}

{% set content %}

    <h2 class="first">{{ "Status"|t('social', { loginProvider: loginProvider.name }) }}</h2>

    {% if loginProvider.isConfigured %}
        {% if loginProvider.isEnabled %}
            <p><span class="status on"></span> {{ "Social Login with {provider} is enabled."|t('social', { provider: loginProvider.name }) }}</p>
        {% else %}
            <p><span class="status"></span> {{ "Social Login with {provider} is disabled."|t('social', { provider: loginProvider.name }) }}</p>
        {% endif %}
    {% else %}
        <p><span class="status"></span> {{ "Not configured"|t('social', { provider: loginProvider.name }) }}</p>
        <p class="light">{{ "Social Login with {provider} is disabled because the OAuth client ID or secret is missing for this provider."|t('social', { provider: loginProvider.name}) }}</p>
    {% endif %}

    <hr>

    <h2>{{ "OAuth Client"|t('social') }}</h2>

	{% if loginProvider.managerUrl %}
        <p class="light">{{ "Go to the {link} to manage your OAuth application."|t('social', {link: '<a href="'~loginProvider.managerUrl~'">{label}</a>'|t('social', {label: "{loginProvider} API console"|t('social', {loginProvider: loginProvider.name})})})|raw }}</p>
	{% endif %}


    <ul class="bullets">
        <li><strong>Client ID:</strong> {{ loginProvider.infos.clientId ?? '' }}</li>
        <li><strong>Client Secret:</strong> {{ loginProvider.infos.clientSecret ?? '' }}</li>
        <li><strong>Redirect URI:</strong> {{ loginProvider.getRedirectUri() }}</li>

    </ul>


	{% if loginProvider.scope or loginProvider.authorizationOptions %}
        {% if loginProvider.scope %}
            <h2>{{ "OAuth Permissions"|t('social') }}</h2>
            <ul class="bullets">
                {% for scope in loginProvider.scope %}
                    <li>{{ scope }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        {% if loginProvider.authorizationOptions %}
            <h2>{{ "Authorization Options"|t('social') }}</h2>
            <ul class="bullets">
                {% for optionKey, optionValue in loginProvider.authorizationOptions %}
                    <li><strong>{{ optionKey }}:</strong> {{ optionValue }} </li>
                {% endfor %}
            </ul>
        {% endif %}
	{% endif %}

{% endset %}
